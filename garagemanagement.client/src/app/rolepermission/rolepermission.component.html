<div class="container mt-4" [formGroup]="form">

  <!-- ADD MODULE -->
  <div class="card mb-3">
    <div class="card-header bg-dark text-white">Add Permission Module</div>
    <div class="card-body d-flex gap-2">
      <input class="form-control"
             placeholder="Module name"
             formControlName="newModule">
      <button class="btn btn-primary" (click)="addModule()">Add</button>
    </div>
  </div>

  <!-- ROLE SELECTION -->
  <div class="card">
    <div class="card-header bg-primary text-white">Assign Modules</div>
    <div class="card-body">

      <div class="mb-3">
        <label class="fw-bold">Role</label>
        <select class="form-select" formControlName="roleId">
          <option [ngValue]="null">-- Select Role --</option>
          <option *ngFor="let r of roles" [ngValue]="r.id">
            {{ r.roleName }}
          </option>
        </select>
      </div>

      <!-- MODULE CHECKBOXES -->
      <div formGroupName="modules" class="list-group">
        <label *ngFor="let m of modules"
               class="list-group-item d-flex justify-content-between">
          {{ m.name }}
          <input type="checkbox" [formControlName]="m.id">
        </label>
      </div>

      <div class="text-end mt-3">
        <button class="btn btn-success"
                [disabled]="isSaving"
                (click)="save()">
          Save Permissions
        </button>
      </div>

    </div>
  </div>
</div>
