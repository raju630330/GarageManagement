<div>

  <!-- MAIN TITLE -->
  <div class="card mb-2">
    <div class="card-header bg-light d-flex justify-content-center align-items-center border-0"
         style="padding: 16px; font-size: 18px; font-weight: 600;">
      üìù New Job Card
    </div>
  </div>

  <mat-accordion multi>

    <!-- SECTION 1: Search Options & Vehicle Info -->
    <mat-expansion-panel>
      <mat-expansion-panel-header style="background-color: #3f51b5; color: white;" class="mt-4">
        <mat-panel-title style="color: white;">Search Options & Vehicle Info</mat-panel-title>
      </mat-expansion-panel-header>
      <div class="mt-2">
        <input type="text" class="form-control mb-2"
               placeholder="Search by Reg No / Customer No / Mobile / Email / VIN / Vehicle / Corporate">

        <div style="display: flex; gap: 10px; overflow-x: auto; padding: 5px;">
          <div class="simple-icon-box" (click)="openPopup('servicePackage')">Service Package</div>
          <div class="simple-icon-box" (click)="openPopup('serviceHistory')">Service History</div>
          <div class="simple-icon-box" (click)="openPopup('feedback')">Feedback</div>
          <div class="simple-icon-box" (click)="openPopup('dueAmount')">Due Amount</div>
          <div class="simple-icon-box" (click)="openPopup('reminders')">Reminders</div>
          <div class="simple-icon-box" (click)="openPopup('batteryTyre')">Battery/Tyre</div>
        </div>

      </div>
    </mat-expansion-panel>

    <!-- SECTION 2: Vehicle Data -->
    <mat-expansion-panel>
      <mat-expansion-panel-header style="background-color: #00bcd4; color: white;" class="mt-4">
        <mat-panel-title style="color: white;">Vehicle Data</mat-panel-title>
      </mat-expansion-panel-header>

      <div class="row g-2 mt-2">
        <div class="col-md-4"><label>Registration No</label><input class="form-control" placeholder="ABCD123456"></div>
        <div class="col-md-4"><label>Odometer In</label><input class="form-control" placeholder="12000"></div>
        <div class="col-md-4"><label>Avg KMS/Day</label><input class="form-control" placeholder="50"></div>
        <div class="col-md-4"><label>VIN</label><input class="form-control" placeholder="1HGCM82633A123456"></div>
        <div class="col-md-4"><label>Engine No</label><input class="form-control" placeholder="ENG123456"></div>

        <div class="col-md-4">
          <label>Vehicle Colour</label>
          <select class="form-select">
            <option disabled selected>Select Colour</option>
            <option>White</option>
            <option>Black</option>
            <option>Silver</option>
            <option>Red</option>
            <option>Blue</option>
            <option>Grey</option>
          </select>
        </div>

        <div class="col-md-4">
          <label>Fuel Type</label>
          <select class="form-select">
            <option disabled selected>Select Fuel</option>
            <option>Petrol</option>
            <option>Diesel</option>
            <option>CNG</option>
            <option>Electric</option>
            <option>Hybrid</option>
          </select>
        </div>

        <div class="col-md-4">
          <label>Service Type</label>
          <select class="form-select">
            <option disabled selected>Select Service</option>
            <option>Periodic Service</option>
            <option>Running Repairs</option>
            <option>Accidental Repair</option>
            <option>Major Service</option>
            <option>Inspection</option>
          </select>
        </div>

        <div class="col-md-4">
          <label>Service Advisor</label>
          <select class="form-select">
            <option disabled selected>Select Advisor</option>
            <option>John</option>
            <option>Jane</option>
            <option>Robert</option>
          </select>
        </div>

        <div class="col-md-4">
          <label>Technician</label>
          <select class="form-select">
            <option disabled selected>Select Technician</option>
            <option>Mike</option>
            <option>Sarah</option>
            <option>David</option>
          </select>
        </div>

        <div class="col-md-4">
          <label>Vendors</label>
          <select class="form-select">
            <option disabled selected>Select Vendor</option>
            <option>Vendor A</option>
            <option>Vendor B</option>
            <option>Vendor C</option>
          </select>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- SECTION 3: Customer Concerns -->
    <mat-expansion-panel>
      <mat-expansion-panel-header style="background-color: #ff69b4; color: white;" class="mt-4">
        <mat-panel-title style="color: white;">Customer Concerns</mat-panel-title>
      </mat-expansion-panel-header>
      <div class="mt-2">
        <textarea class="form-control" [(ngModel)]="newConcern" placeholder="Enter customer concerns"></textarea>
        <button class="btn btn-primary mt-2" (click)="addConcern()">Add Service</button>

        <div *ngFor="let c of concerns; let i = index" class="p-2 mb-1"
             [ngClass]="{'bg-success text-white': c.active, 'bg-secondary text-white': !c.active}"
             (click)="toggleConcern(i)">
          {{ c.text }}
        </div>
      </div>
    </mat-expansion-panel>

    <!-- SECTION 4: Customer & Corporate Info -->
    <mat-expansion-panel>
      <mat-expansion-panel-header style="background-color: #ffc107; color: white;" class="mt-4">
        <mat-panel-title style="color: white;">Customer & Corporate Info</mat-panel-title>
      </mat-expansion-panel-header>

      <div class="row g-2 mt-2">
        <div class="col-md-4"><label>Corporate/Float</label>
        <select class="form-select">
          <option disabled selected>Select</option>
          </select>
        </div>
        <div class="col-md-4"><label>Customer Name</label><input class="form-control" placeholder="John Doe"></div>
        <div class="col-md-4"><label>Mobile Number</label><input class="form-control" placeholder="+91XXXXXXXXXX"></div>
        <div class="col-md-4"><label>Alternate Number</label><input class="form-control" placeholder="+91XXXXXXXXXX"></div>
        <div class="col-md-4"><label>Email</label><input class="form-control" placeholder="customer@example.com"></div>
        <div class="col-md-4"><label>Est. Delivery Date</label><input type="date" class="form-control"></div>
        <div class="col-md-4">
          <label>Insurance Company</label>
          <select class="form-select">
            <option disabled selected>Select Insurance</option>
            <option>LIC</option>
            <option>HDFC Ergo</option>
            <option>ICICI Lombard</option>
            <option>Bajaj Allianz</option>
            <option>Tata AIG</option>
            <option>SBI General</option>
          </select>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- SECTION 5: Advance Payment -->
    <mat-expansion-panel>
      <mat-expansion-panel-header style="background-color: #4caf50; color: white;" class="mt-4">
        <mat-panel-title style="color: white;">Advance Payment</mat-panel-title>
      </mat-expansion-panel-header>

      <div class="row g-2 mt-2">
        <div class="col-md-3"><label>Cash</label><input class="form-control" placeholder="Enter Cash"></div>
        <div class="col-md-3">
          <label>Bank Name</label>
          <select class="form-select">
            <option disabled selected>Select Bank</option>
            <option>State Bank of India</option>
            <option>HDFC</option>
            <option>ICICI</option>
            <option>Axis Bank</option>
            <option>PNB</option>
          </select>
        </div>
        <div class="col-md-3"><label>Cheque No</label><input class="form-control" placeholder="Enter Cheque No"></div>
        <div class="col-md-3"><label>Amount</label><input type="number" class="form-control" placeholder="Enter Amount"></div>
        <div class="col-md-3"><label>Date</label><input type="date" class="form-control"></div>
      </div>
    </mat-expansion-panel>

  </mat-accordion>

  <!-- ACTION BUTTONS -->
  <div class="d-flex gap-2 mt-3">
    <button class="btn btn-warning">Give Estimation Later</button>
    <button class="btn btn-success">Prepare Estimate Now</button>
  </div>

</div>
