<div class="container-fluid py-3">

  <!-- ðŸ”¹ HEADER -->
  <div class="row mb-3">
    <div class="col-12">
      <div class="d-flex align-items-center justify-content-between
                  bg-white p-3 rounded shadow-sm">

        <h1 class="h4 mb-0 d-flex align-items-center fw-bold text-dark">
          <i class="fas fa-users-cog me-2 text-primary"></i>
          Manage User Roles
        </h1>

      </div>
    </div>
  </div>

  <!-- ðŸ”¹ EDIT FORM -->
  <div class="row mb-3" *ngIf="isEditMode">
    <div class="col-md-12">
      <div class="bg-white p-3 rounded shadow-sm">

        <form [formGroup]="userForm">

          <!-- User Name -->
          <div class="row m-2 align-items-center">
            <div class="col-md-3 text-end">
              <label class="fw-semibold">User Name :</label>
            </div>
            <div class="col-md-5">
              <input type="text"
                     class="form-control"
                     formControlName="username"
                     readonly />
            </div>
          </div>

          <!-- Role -->
          <div class="row m-2 align-items-center">
            <div class="col-md-3 text-end">
              <label class="fw-semibold">Role :</label>
            </div>
            <div class="col-md-5">
              <select class="form-select" formControlName="roleId">
                <option value="">-- Select Role --</option>
                <option value="2">Manager</option>
                <option value="3">Supervisor</option>
                <option value="4">Technician</option>
                <option value="5">Driver</option>
              </select>

              <span class="text-danger"
                    *ngIf="userForm.get('roleId')?.touched && userForm.get('roleId')?.invalid">
                Please select role
              </span>
            </div>
          </div>

          <!-- Buttons -->
          <div class="row justify-content-center mt-3">
            <div class="col-md-2 text-center">
              <button type="button"
                      class="btn btn-primary w-100"
                      (click)="updateUserRole()">
                Update
              </button>
            </div>
            <div class="col-md-2 text-center">
              <button type="button"
                      class="btn btn-outline-secondary w-100"
                      (click)="cancelEdit()">
                Cancel
              </button>
            </div>
          </div>

        </form>

      </div>
    </div>
  </div>

  <!-- ðŸ”¹ USER LIST TABLE -->
  <div class="row">
    <div class="col-md-12">
      <div class="table-responsive bg-white rounded shadow-sm">

        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th>User Name</th>
              <th>Role</th>
              <th style="width:120px">Actions</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let user of users">
              <td>{{ user.username }}</td>
              <td>{{ user.roleName }}</td>
              <td>
                <button class="btn btn-sm btn-outline-primary me-2"
                        (click)="editUser(user)">
                  <i class="bi bi-pencil"></i>
                </button>
              </td>
            </tr>

            <!-- No Data -->
            <tr *ngIf="users.length === 0">
              <td colspan="3" class="text-center text-muted">
                No records found
              </td>
            </tr>
          </tbody>

        </table>

      </div>
    </div>
  </div>

</div>
