<section class="supervisor-section">
  <div class="container p-4">
    <form [formGroup]="jobForm" (ngSubmit)="submit()">
      <table class="job-table">
        <thead>
          <tr>
            <th>Sl. No.</th>
            <th>Technician Voice</th>
            <th>Supervisor Instructions</th>
            <th>Action Taken</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody formArrayName="rows">
          <tr *ngFor="let row of rows.controls; let i = index" [formGroupName]="i">
            <!-- Sl. No (Auto Increment) -->
            <td>{{ i + 1 }}</td>

            <!-- Technician Voice -->
            <td>
              <input type="text"
                     formControlName="technicianVoice"
                     placeholder="Technician Voice"
                     maxlength="50" />
              <div class="error" *ngIf="row.get('technicianVoice')?.invalid && row.get('technicianVoice')?.touched">
                Alphabets only (max 50).
              </div>
            </td>

            <!-- Supervisor Instructions -->
            <td>
              <input type="text"
                     formControlName="supervisorInstructions"
                     placeholder="Supervisor Instructions"
                     maxlength="50" />
              <div class="error" *ngIf="row.get('supervisorInstructions')?.invalid && row.get('supervisorInstructions')?.touched">
                Alphabets only (max 50).
              </div>
            </td>

            <!-- Action Taken -->
            <td>
              <input type="text"
                     formControlName="actionTaken"
                     placeholder="Action Taken"
                     maxlength="50" />
              <div class="error" *ngIf="row.get('actionTaken')?.invalid && row.get('actionTaken')?.touched">
                Alphabets only (max 50).
              </div>
            </td>

            <!-- Start Time -->
            <td>
              <input type="text"
                     formControlName="startTime"
                     placeholder="HH:MM AM/PM" />
              <div class="error" *ngIf="row.get('startTime')?.invalid && row.get('startTime')?.touched">
                Enter valid time (e.g., 09:30 AM).
              </div>
            </td>

            <!-- End Time -->
            <td>
              <input type="text"
                     formControlName="endTime"
                     placeholder="HH:MM AM/PM" />
              <div class="error" *ngIf="row.get('endTime')?.invalid && row.get('endTime')?.touched">
                Enter valid time (e.g., 05:45 PM).
              </div>
            </td>

            <!-- Remove Button -->
            <td>
              <button type="button"
                      class="btn btn-danger"
                      (click)="removeRow(i)"
                    >
                Remove
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="button-group mt-3">
        <button type="button" class="btn btn-add" (click)="addRow()">Add Row</button>
        <button type="submit" class="btn btn-submit"> Submit</button>
      </div>
    </form>
    <!-- Custom Alert Box (Centered) -->
    <div class="custom-alert" *ngIf="showAlert">
      <div class="alert-content">
        <p>{{ alertMessage }}</p>
        <div class="alert-buttons" *ngIf="confirmAction">
          <button class="btn btn-danger" (click)="confirmYes()">Yes</button>
          <button class="btn btn-secondary" (click)="closeAlert()">No</button>
        </div>
        <div class="alert-buttons" *ngIf="!confirmAction">
          <button class="btn btn-primary" (click)="closeAlert()">OK</button>
        </div>
      </div>
    </div>


  </div>
</section>
